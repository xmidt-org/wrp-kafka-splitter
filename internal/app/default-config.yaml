# SPDX-FileCopyrightText: 2026 Comcast Cable Communications Management, LLC
# SPDX-License-Identifier: Apache-2.0
---
servers:

  health:
    http:
      address: ":8080"
    path: /health

  metrics:
    http:
      address: "127.0.0.1:9361"
    path: /metrics

  pprof:
    http:
      address: "127.0.0.1:9999"
    path: /debug/pprof/

  # primary:
  #   http:
  #     address: ":8080"

  # alternate:
  #   http:
  #     address: "127.0.0.1:9090"

tracing:
  provider: "stdout"
  skip_trace_export: true

prometheus:
  default_namespace: xmidt
  default_subsystem: wrp_kafka_splitter

prometheus_handler:
  instrument_metric_handler: true
  max_requests_in_flight: 5
  timeout: 5s

# Kafka Consumer Configuration
consumer:
  # Required: List of Kafka broker addresses
  brokers:
    - "localhost:9092"

  # Required: Topics to consume from
  topics:
    - "wrp-events"

  # Required: Consumer group ID for offset management
  group_id: "wrp-kafka-splitter"

  # Session timeout for consumer group membership (default: 45s)
  # session_timeout: 45s

  # Heartbeat interval to maintain group membership (default: 3s)
  # heartbeat_interval: 3s

  # Rebalance timeout (default: 60s)
  # rebalance_timeout: 60s

  # Fetch configuration
  # fetch_min_bytes: 1
  # fetch_max_bytes: 52428800  # 50MB
  # fetch_max_wait: 500ms
  # fetch_max_partition_bytes: 1048576  # 1MB
  # max_concurrent_fetches: 0  # unlimited

  # Auto-commit interval (default: 5s)
  # auto_commit_interval: 5s

  # Disable auto-commit to manually control offsets
  # disable_auto_commit: false

  # Start from beginning if no committed offset exists
  # consume_from_beginning: false

  # Client identification
  client_id: "wrp-kafka-splitter-client"
  # rack: ""
  # instance_id: ""

  # Connection settings
  # conn_idle_timeout: 20s
  # request_timeout_overhead: 10s

  # Request retries
  # request_retries: 3

  # SASL Authentication (optional)
  # sasl:
  #   mechanism: "SCRAM-SHA-512"  # PLAIN, SCRAM-SHA-256, SCRAM-SHA-512
  #   username: "kafka-user"
  #   password: "kafka-password"

  # TLS Encryption (optional)
  # tls:
  #   enabled: true
  #   ca_file: "/path/to/ca.pem"
  #   cert_file: "/path/to/client-cert.pem"
  #   key_file: "/path/to/client-key.pem"
  #   insecure_skip_verify: false

# Logger Configuration
logger:
  # Log level (DEBUG, INFO, WARN, ERROR)
  level: "DEBUG"

  # Log encoding format (json, console)
  encoding: "json"

  # Output destinations for logs
  output_paths:
    - "stdout"

  # Output destinations for error logs
  error_output_paths:
    - "stderr"

  # Development mode (more verbose output, colored logs)
  development: false

  # Level encoding (lowercase, capital, capitalColor)
  encode_level: "lowercase"

  # Time encoding (iso8601, millis, nanos, rfc3339)
  encode_time: "iso8601"
